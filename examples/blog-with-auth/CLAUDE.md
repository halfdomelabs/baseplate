# Blog with Auth - Project Context

This is a Baseplate-generated project that follows specific coding standards and conventions. This document provides essential context for development.

## Key Project Information

- **Generated by**: Baseplate code generation platform
- **Package Manager**: pnpm 10+ (enforced)
- **Node Version**: 20+ (Volta pinned to 22.18.0)
- **Module System**: ESM only (`"type": "module"`)
- **Monorepo**: Uses pnpm workspaces with packages in `packages/` directory

## Monorepo Structure

This PNPM workspace monorepo contains two main packages:

### Packages Overview

1. **`/packages/admin`** - React-based web admin interface
   - **Purpose**: Frontend admin panel for the blog platform
   - **Tech Stack**: React 19, TypeScript, Vite, Apollo Client, TailwindCSS
   - **Key Features**: Authentication UI, Apollo GraphQL client, reusable components, routing

2. **`/packages/backend`** - Node.js GraphQL API server
   - **Purpose**: Backend API server with GraphQL endpoint
   - **Tech Stack**: Fastify, GraphQL Yoga, Pothos, Prisma, PostgreSQL
   - **Key Features**: Modular architecture, authentication system, blog management

### Directory Structure

**Admin Package (`/packages/admin/src/`):**

```
src/
├── app/          # Main app setup and providers
├── components/   # Reusable UI components
├── pages/        # Page components and routing
│   ├── auth/     # Authentication pages
│   └── Home/     # Home page
├── hooks/        # Custom React hooks
├── services/     # Apollo setup, config, logging
└── generated/    # Auto-generated GraphQL types
```

**Backend Package (`/packages/backend/src/`):**

```
src/
├── modules/      # Feature modules
│   ├── accounts/ # User auth and management
│   ├── blogs/    # Blog feature module
│   └── graphql/  # Core GraphQL setup
├── plugins/      # Fastify plugins
├── prisma/       # Database migrations
├── services/     # Core services
└── utils/        # Utility functions
```

### Package Relationships

- **GraphQL Schema Sharing**: Backend generates `schema.graphql` used by admin for code generation
- **Type Safety**: GraphQL Code Generator ensures type safety across packages
- **Development**: Run both packages with `pnpm dev` from root
- **Build Order**: Turbo manages build dependencies

## Critical Coding Rules

### Import/Export Rules

- **Always use .js extensions** in import statements, even for TypeScript files
- Example: `import { getSystemInfo } from '@src/system-info.js';`
- Use `import type` for type-only imports
- Follow ESM module resolution with TypeScript's `NodeNext`

### TypeScript Rules

- **Always specify explicit return types** for functions
- Use strict type checking
- Use `NodeNext` module resolution
- Enable `isolatedModules`

### File Naming

- Use kebab-case for all file and directory names
- Test files: `.unit.test.ts` or `.int.test.ts` suffixes
- Collocate tests with source files

### Testing with Vitest

- **No globals**: Import test functions explicitly
- Example: `import { describe, expect, it } from 'vitest';`
- Tests run from `./src` root directory

## Baseplate-Specific Guidelines

### Template-Friendly Architecture

**DO:**

- Follow established patterns in the codebase
- Write clean, consistent code
- Use well-defined interfaces
- Create reusable components
- Maintain consistent formatting

**AVOID:**

- One-off implementations that break patterns
- Highly coupled code
- Architectural deviations
- Complex, non-reusable abstractions

### Working with Generated Code

- Generated files may be overwritten - customize carefully
- Follow existing architectural patterns
- Configuration changes should be made through Baseplate UI when possible
- Look at similar features for implementation patterns

## Essential Commands

```bash
# Install dependencies (pnpm enforced)
pnpm install

# Development (runs both packages)
pnpm dev

# Run linting across all packages
pnpm lint
pnpm lint -- --fix

# Run type checking across all packages
pnpm typecheck

# Run tests across all packages
pnpm test

# Run Prettier formatting
pnpm prettier:check
pnpm prettier:write

# Build all packages
pnpm build

# Database commands (from backend package)
cd packages/backend
pnpm db:migrate      # Run migrations
pnpm db:seed        # Seed database
pnpm db:reset       # Reset database
```

## Development Workflow

1. **Before making changes**: Understand how similar features are implemented
2. **Follow patterns**: Use established file organization and naming conventions
3. **Test thoroughly**: Ensure changes don't break the template-driven architecture
4. **Run checks**: Always run `pnpm lint -- --fix` and `pnpm typecheck` before committing

## Architecture Principles

- **Type Safety**: Comprehensive TypeScript with strict checking
- **Modular Design**: Clear separation between features, services, utilities
- **Consistent Patterns**: Similar features follow identical implementations
- **Configuration-Driven**: Behavior controlled through structured config
- **Scalable Structure**: Supports growth without major refactoring

## Key Reminders

- Always use `.js` extensions in imports (even for .ts files)
- Specify explicit return types on all functions
- Use kebab-case for file names
- Import test functions from 'vitest' (no globals)
- Follow existing patterns when adding new features
- This codebase serves as both a working application and a template
- Please add JSDocs to all exported functions, interfaces, classes with documentation of the function, its parameters, return value,
  and all fields.

Remember: Code quality and consistency directly impact Baseplate's ability to generate and maintain similar projects.
