import type { TsImportMapProviderFromSchema } from '@baseplate-dev/core-generators';

import {
  createTsImportMap,
  createTsImportMapSchema,
  packageScope,
} from '@baseplate-dev/core-generators';
import {
  createGeneratorTask,
  createReadOnlyProviderType,
} from '@baseplate-dev/sync';

import { CORE_REACT_COMPONENTS_PATHS } from './template-paths.js';

const reactComponentsImportsSchema = createTsImportMapSchema({
  AddOptionRequiredFields: { isTypeOnly: true },
  Alert: {},
  AlertIcon: {},
  BackButton: {},
  Button: {},
  ButtonGroup: {},
  buttonVariants: {},
  Card: {},
  Checkbox: {},
  CheckboxField: {},
  CheckboxFieldController: {},
  CheckedInput: {},
  cn: {},
  Combobox: {},
  ConfirmDialog: {},
  ErrorableLoader: {},
  ErrorDisplay: {},
  FormError: {},
  FormFieldProps: { isTypeOnly: true },
  FormLabel: {},
  Input: {},
  InputField: {},
  InputFieldController: {},
  inputVariants: {},
  Label: {},
  LinkButton: {},
  ListGroup: {},
  Loader: {},
  mergeRefs: {},
  Modal: {},
  MultiSelectOptionProps: { isTypeOnly: true },
  NavigationMenu: {},
  NavigationMenuContent: {},
  NavigationMenuIndicator: {},
  NavigationMenuItem: {},
  NavigationMenuItemWithLink: {},
  NavigationMenuLink: {},
  NavigationMenuList: {},
  NavigationMenuTrigger: {},
  navigationMenuTriggerStyle: {},
  NavigationMenuViewport: {},
  NotFoundCard: {},
  ReactDatePickerInput: {},
  ReactSelectInput: {},
  ScrollArea: {},
  Select: {},
  selectCheckVariants: {},
  selectContentVariants: {},
  SelectField: {},
  SelectFieldController: {},
  SelectInput: {},
  selectItemVariants: {},
  SelectOptionProps: { isTypeOnly: true },
  selectTriggerVariants: {},
  SidebarLayout: {},
  SidebarLayoutContent: {},
  SidebarLayoutSidebar: {},
  Spinner: {},
  Status: { isTypeOnly: true },
  StatusType: { isTypeOnly: true },
  Table: {},
  TextArea: {},
  TextAreaInput: {},
  TextInput: {},
  Toaster: {},
  useConfirmDialog: {},
  UseConfirmDialogRequestOptions: { isTypeOnly: true },
  useConfirmDialogState: {},
  useControlledState: {},
  useControllerMerged: {},
  useStatus: {},
});

export type ReactComponentsImportsProvider = TsImportMapProviderFromSchema<
  typeof reactComponentsImportsSchema
>;

export const reactComponentsImportsProvider =
  createReadOnlyProviderType<ReactComponentsImportsProvider>(
    'react-components-imports',
  );

const coreReactComponentsImportsTask = createGeneratorTask({
  dependencies: {
    paths: CORE_REACT_COMPONENTS_PATHS.provider,
  },
  exports: {
    reactComponentsImports: reactComponentsImportsProvider.export(packageScope),
  },
  run({ paths }) {
    return {
      providers: {
        reactComponentsImports: createTsImportMap(
          reactComponentsImportsSchema,
          {
            AddOptionRequiredFields: paths.typesForm,
            Alert: paths.index,
            AlertIcon: paths.index,
            BackButton: paths.index,
            Button: paths.index,
            ButtonGroup: paths.index,
            buttonVariants: paths.stylesButton,
            Card: paths.index,
            Checkbox: paths.index,
            CheckboxField: paths.index,
            CheckboxFieldController: paths.index,
            CheckedInput: paths.index,
            cn: paths.cn,
            Combobox: paths.index,
            ConfirmDialog: paths.index,
            ErrorableLoader: paths.index,
            ErrorDisplay: paths.index,
            FormError: paths.index,
            FormFieldProps: paths.typesForm,
            FormLabel: paths.index,
            Input: paths.index,
            InputField: paths.index,
            InputFieldController: paths.index,
            inputVariants: paths.stylesInput,
            Label: paths.index,
            LinkButton: paths.index,
            ListGroup: paths.index,
            Loader: paths.index,
            mergeRefs: paths.mergeRefs,
            Modal: paths.index,
            MultiSelectOptionProps: paths.typesForm,
            NavigationMenu: paths.index,
            NavigationMenuContent: paths.index,
            NavigationMenuIndicator: paths.index,
            NavigationMenuItem: paths.index,
            NavigationMenuItemWithLink: paths.index,
            NavigationMenuLink: paths.index,
            NavigationMenuList: paths.index,
            NavigationMenuTrigger: paths.index,
            navigationMenuTriggerStyle: paths.index,
            NavigationMenuViewport: paths.index,
            NotFoundCard: paths.index,
            ReactDatePickerInput: paths.index,
            ReactSelectInput: paths.index,
            ScrollArea: paths.index,
            Select: paths.index,
            selectCheckVariants: paths.stylesSelect,
            selectContentVariants: paths.stylesSelect,
            SelectField: paths.index,
            SelectFieldController: paths.index,
            SelectInput: paths.index,
            selectItemVariants: paths.stylesSelect,
            SelectOptionProps: paths.typesForm,
            selectTriggerVariants: paths.stylesSelect,
            SidebarLayout: paths.index,
            SidebarLayoutContent: paths.index,
            SidebarLayoutSidebar: paths.index,
            Spinner: paths.index,
            Status: paths.useStatus,
            StatusType: paths.useStatus,
            Table: paths.index,
            TextArea: paths.index,
            TextAreaInput: paths.index,
            TextInput: paths.index,
            Toaster: paths.index,
            useConfirmDialog: paths.useConfirmDialog,
            UseConfirmDialogRequestOptions: paths.useConfirmDialog,
            useConfirmDialogState: paths.useConfirmDialog,
            useControlledState: paths.hooksUseControlledState,
            useControllerMerged: paths.hooksUseControllerMerged,
            useStatus: paths.useStatus,
          },
        ),
      },
    };
  },
});

export const CORE_REACT_COMPONENTS_IMPORTS = {
  task: coreReactComponentsImportsTask,
};
